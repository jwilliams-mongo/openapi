import os
import sys
import subprocess
import csv


if len(sys.argv) < 1:
    print ('Usage: %s <output-file>' % sys.argv[0])
    sys.exit(1)

api_url_first_half = "https://docs.opsmanager.mongodb.com/current"

api_url_sec_half = ["/reference/api/admin/backup/backup-daemon-config",
"/reference/api/admin/backup/backup-group-config",
"/reference/api/admin/backup/blockstore-config",
"/reference/api/admin/backup/daemonConfigs/delete-one-backup-daemon-configuration",
"/reference/api/admin/backup/daemonConfigs/get-all-backup-daemon-configurations",
"/reference/api/admin/backup/daemonConfigs/get-one-backup-daemon-configuration-by-host",
"/reference/api/admin/backup/daemonConfigs/update-one-backup-daemon-configuration",
"/reference/api/admin/backup/file-system-store-config",
"/reference/api/admin/backup/groups/get-all-backup-group-configurations",
"/reference/api/admin/backup/groups/get-one-backup-group-configuration-by-id",
"/reference/api/admin/backup/groups/update-one-backup-group-configuration",
"/reference/api/admin/backup/oplog-store-config",
"/reference/api/admin/backup/oplog/mongoConfigs/create-one-oplog-configuration",
"/reference/api/admin/backup/oplog/mongoConfigs/delete-one-oplog-configuration",
"/reference/api/admin/backup/oplog/mongoConfigs/get-all-oplog-configurations",
"/reference/api/admin/backup/oplog/mongoConfigs/get-one-oplog-configuration-by-id",
"/reference/api/admin/backup/oplog/mongoConfigs/update-one-oplog-configuration",
"/reference/api/admin/backup/s3-blockstore-config",
"/reference/api/admin/backup/snapshot/fileSystemConfigs/create-one-file-system-store-configuration",
"/reference/api/admin/backup/snapshot/fileSystemConfigs/delete-one-file-system-store-configuration",
"/reference/api/admin/backup/snapshot/fileSystemConfigs/get-all-file-system-store-configurations",
"/reference/api/admin/backup/snapshot/fileSystemConfigs/get-one-file-system-store-configuration-by-id",
"/reference/api/admin/backup/snapshot/fileSystemConfigs/update-one-file-system-store-configuration",
"/reference/api/admin/backup/snapshot/mongoConfigs/create-one-blockstore-configuration",
"/reference/api/admin/backup/snapshot/mongoConfigs/delete-one-blockstore-configuration",
"/reference/api/admin/backup/snapshot/mongoConfigs/get-all-blockstore-configurations",
"/reference/api/admin/backup/snapshot/mongoConfigs/get-one-blockstore-configuration-by-id",
"/reference/api/admin/backup/snapshot/mongoConfigs/update-one-blockstore-configuration",
"/reference/api/admin/backup/snapshot/s3Configs/create-one-s3-blockstore-configuration",
"/reference/api/admin/backup/snapshot/s3Configs/delete-one-s3-blockstore-configuration",
"/reference/api/admin/backup/snapshot/s3Configs/get-all-s3-blockstore-configurations",
"/reference/api/admin/backup/snapshot/s3Configs/get-one-s3-blockstore-configuration-by-id",
"/reference/api/admin/backup/snapshot/s3Configs/update-one-s3-blockstore-configuration",
"/reference/api/admin/backup/sync-store-config",
"/reference/api/admin/backup/sync/mongoConfigs/create-one-sync-store-configuration",
"/reference/api/admin/backup/sync/mongoConfigs/delete-one-sync-store-configuration",
"/reference/api/admin/backup/sync/mongoConfigs/get-all-sync-store-configurations",
"/reference/api/admin/backup/sync/mongoConfigs/get-one-sync-store-configuration-by-id",
"/reference/api/admin/backup/sync/mongoConfigs/update-one-sync-store-configuration",
"/reference/api/agentapikeys/create-one-agent-api-key",
"/reference/api/agentapikeys/delete-one-agent-api-key",
"/reference/api/agentapikeys/get-all-agent-api-keys-for-project",
"/reference/api/agents-get-all",
"/reference/api/agents-get-by-type",
"/reference/api/agents/get-agent-versions-global",
"/reference/api/agents/get-agent-versions-per-project",
"/reference/api/alert-configurations-create-config",
"/reference/api/alert-configurations-delete-config",
"/reference/api/alert-configurations-enable-disable-config",
"/reference/api/alert-configurations-get-all-configs",
"/reference/api/alert-configurations-get-config",
"/reference/api/alert-configurations-get-matchers-field-names",
"/reference/api/alert-configurations-get-open-alerts",
"/reference/api/alert-configurations-update-config",
"/reference/api/alerts-acknowledge-alert",
"/reference/api/alerts-get-alert",
"/reference/api/alerts-get-all-alerts",
"/reference/api/api-key/api-key-get-all",
"/reference/api/api-key/delete-one-api-key",
"/reference/api/api-key/enable-disable-api-key",
"/reference/api/api-keys/global/create-one-global-api-key",
"/reference/api/api-keys/global/create-one-global-whitelist",
"/reference/api/api-keys/global/delete-one-global-api-key",
"/reference/api/api-keys/global/delete-one-global-whitelist",
"/reference/api/api-keys/global/get-all-global-api-key-roles",
"/reference/api/api-keys/global/get-all-global-api-keys",
"/reference/api/api-keys/global/get-all-global-whitelist",
"/reference/api/api-keys/global/get-one-global-api-key",
"/reference/api/api-keys/global/get-one-global-whitelist",
"/reference/api/api-keys/global/update-one-global-api-key",
"/reference/api/api-keys/global/update-one-global-whitelist",
"/reference/api/api-keys/org/create-one-org-api-key",
"/reference/api/api-keys/org/create-org-api-key-whitelist",
"/reference/api/api-keys/org/delete-one-api-key",
"/reference/api/api-keys/org/delete-one-org-api-key-whitelist",
"/reference/api/api-keys/org/get-all-org-api-key-whitelist",
"/reference/api/api-keys/org/get-all-org-api-keys",
"/reference/api/api-keys/org/get-one-org-api-key",
"/reference/api/api-keys/org/get-one-org-api-key-whitelist",
"/reference/api/api-keys/org/update-one-org-api-key",
"/reference/api/api-keys/project/assign-one-org-apiKey-to-one-project",
"/reference/api/api-keys/project/create-one-apiKey-in-one-project",
"/reference/api/api-keys/project/delete-one-apiKey-in-one-project",
"/reference/api/api-keys/project/get-all-apiKeys-in-one-project",
"/reference/api/api-keys/project/update-one-apiKey-in-one-project",
"/reference/api/automation-status",
"/reference/api/automation-status-full",
"/reference/api/backup-configurations",
"/reference/api/backup/get-all-backup-configs-for-group",
"/reference/api/backup/get-one-backup-config-by-cluster-id",
"/reference/api/backup/get-snapshot-schedule",
"/reference/api/backup/update-backup-config",
"/reference/api/backup/update-one-snapshot-schedule-by-cluster-id",
"/reference/api/checkpoints",
"/reference/api/clusters/clusters-get-all",
"/reference/api/clusters/clusters-get-all-key",
"/reference/api/clusters/clusters-get-one",
"/reference/api/clusters/clusters-update-one",
"/reference/api/controlled-features/get-all-feature-control-policies",
"/reference/api/controlled-features/get-controlled-features-for-one-project",
"/reference/api/controlled-features/update-controlled-features-for-one-project",
"/reference/api/database-get-by-name",
"/reference/api/databases-get-all-on-host",
"/reference/api/diagnostic-archives",
"/reference/api/diagnostics/get-project-diagnostic-archive",
"/reference/api/disk-get-one",
"/reference/api/disks-get-all",
"/reference/api/encryption-keys",
"/reference/api/events/get-all-events-for-org",
"/reference/api/events/get-all-events-for-project",
"/reference/api/events/get-all-events-global",
"/reference/api/events/get-one-event-for-org",
"/reference/api/events/get-one-event-for-project",
"/reference/api/events/get-one-event-global",
"/reference/api/feature-control-policies",
"/reference/api/global-alert-configuration-get-all-open-alerts-triggered",
"/reference/api/global-alert-configurations-create-one",
"/reference/api/global-alert-configurations-delete-one",
"/reference/api/global-alert-configurations-get-all",
"/reference/api/global-alert-configurations-get-one"
"/reference/api/global-alert-configurations-toggle-one",
"/reference/api/global-alert-configurations-update-one",
"/reference/api/global-alerts-ack-one",
"/reference/api/global-alerts-get-all",
"/reference/api/global-alerts-get-one",
"/reference/api/global-api-keys",
"/reference/api/global-events",
"/reference/api/groups/add-or-remove-tags-from-one-group",
"/reference/api/groups/add-users-to-one-group",
"/reference/api/groups/change-one-group-name",
"/reference/api/groups/create-one-group",
"/reference/api/groups/delete-one-group",
"/reference/api/groups/get-all-groups-for-current-user",
"/reference/api/groups/get-all-groups-with-specific-tags-for-current-user",
"/reference/api/groups/get-all-users-in-one-group",
"/reference/api/groups/get-one-group-by-agent-api-key",
"/reference/api/groups/get-one-group-by-id",
"/reference/api/groups/get-one-group-by-name",
"/reference/api/groups/map-ldap-groups-to-manager-roles",
"/reference/api/groups/project-add-team",
"/reference/api/groups/project-get-teams",
"/reference/api/groups/remove-one-user-from-one-group",
"/reference/api/hosts/create-one-host",
"/reference/api/hosts/delete-one-host",
"/reference/api/hosts/get-all-hosts-in-group",
"/reference/api/hosts/get-one-host-by-hostname-port",
"/reference/api/hosts/get-one-host-by-id",
"/reference/api/hosts/update-one-host",
"/reference/api/kmip-keys/get-master-key",
"/reference/api/kmip-keys/rotate-master-key",
"/reference/api/log-collections/log-collections-delete-one",
"/reference/api/log-collections/log-collections-download-job",
"/reference/api/log-collections/log-collections-get-all",
"/reference/api/log-collections/log-collections-get-one",
"/reference/api/log-collections/log-collections-retry",
"/reference/api/log-collections/log-collections-submit",
"/reference/api/log-collections/log-collections-update-one",
"/reference/api/maintenance-windows-create-one",
"/reference/api/maintenance-windows-delete-one",
"/reference/api/maintenance-windows-get-all",
"/reference/api/maintenance-windows-get-one",
"/reference/api/maintenance-windows-update-one",
"/reference/api/measures/get-database-measurements",
"/reference/api/measures/get-disk-measurements",
"/reference/api/measures/get-host-process-system-measurements",
"/reference/api/measures/get-measurement-types",
"/reference/api/measures/measurement-types",
"/reference/api/nav/administration-backup",
"/reference/api/nav/backup-and-restore",
"/reference/api/nav/groups-and-users",
"/reference/api/nav/organizations-and-teams",
"/reference/api/nav/prog-api-keys",
"/reference/api/org-api-key-whitelists",
"/reference/api/organizations/organization-create-one",
"/reference/api/organizations/organization-delete-one",
"/reference/api/organizations/organization-get-all",
"/reference/api/organizations/organization-get-all-projects",
"/reference/api/organizations/organization-get-all-users",
"/reference/api/organizations/organization-get-one",
"/reference/api/organizations/organization-rename",
"/reference/api/performance-advisor/get-slow-queries",
"/reference/api/performance-advisor/get-suggested-indexes",
"/reference/api/performance-advisor/pa-namespaces-get-all",
"/reference/api/project-api-keys",
"/reference/api/restorejobs/create-one-restore-job-for-one-cluster",
"/reference/api/restorejobs/create-one-restore-job-for-one-sccc-config-server",
"/reference/api/restorejobs/get-all-restore-jobs-for-one-cluster",
"/reference/api/restorejobs/get-all-restore-jobs-for-one-sccc-config-server",
"/reference/api/restorejobs/get-one-single-restore-job-for-one-cluster",
"/reference/api/restorejobs/get-one-single-restore-job-for-one-sccc-config-server",
"/reference/api/root",
"/reference/api/snapshots/change-expiry-for-one-snapshot",
"/reference/api/snapshots/get-all-snapshots-for-config-server",
"/reference/api/snapshots/get-all-snapshots-for-one-cluster",
"/reference/api/snapshots/get-one-snapshot-for-config-server",
"/reference/api/snapshots/get-one-snapshot-for-one-cluster",
"/reference/api/snapshots/remove-one-snapshot-from-one-cluster",
"/reference/api/teams/teams-add-user",
"/reference/api/teams/teams-create-one",
"/reference/api/teams/teams-delete-one",
"/reference/api/teams/teams-get-all",
"/reference/api/teams/teams-get-all-users",
"/reference/api/teams/teams-get-one-by-id",
"/reference/api/teams/teams-get-one-by-name",
"/reference/api/teams/teams-remove-from-project",
"/reference/api/teams/teams-remove-user",
"/reference/api/teams/teams-rename-one",
"/reference/api/teams/teams-update-roles",
"/reference/api/third-party-integration-settings-create",
"/reference/api/third-party-integration-settings-delete",
"/reference/api/third-party-integration-settings-get-all",
"/reference/api/third-party-integration-settings-get-one",
"/reference/api/third-party-integration-settings-update",
"/reference/api/usage/create-one-physical-host",
"/reference/api/usage/create-one-report",
"/reference/api/usage/generate-daily-usage-snapshot",
"/reference/api/usage/get-all-physical-hosts",
"/reference/api/usage/get-default-server-type-for-one-organization",
"/reference/api/usage/get-default-server-type-for-one-project",
"/reference/api/usage/get-one-physical-host-by-host-id",
"/reference/api/usage/list-all-host-assignments",
"/reference/api/usage/list-all-host-assignments-in-one-organization",
"/reference/api/usage/list-all-host-assignments-in-one-project",
"/reference/api/usage/remove-one-physical-host",
"/reference/api/usage/update-default-server-type-for-one-organization",
"/reference/api/usage/update-default-server-type-for-one-project",
"/reference/api/usage/update-one-physical-host",
"/reference/api/usage/update-server-type-for-one-host",
"/reference/api/user-create",
"/reference/api/user-create-first",
"/reference/api/user-get-by-id",
"/reference/api/user-get-by-name",
"/reference/api/user-update",
"/reference/api/users/delete-one-user",
"/reference/api/version-manifest/update-version-manifest",
"/reference/api/version-manifest/view-version-manifest",
"/reference/api/whitelist-add-entries",
"/reference/api/whitelist-delete-entry",
"/reference/api/whitelist-get-for-current-user",
"/reference/api/whitelist-get-for-ip-address",
]

api_url_list = []

for sec_half in api_url_sec_half:
	api_url_full = api_url_first_half + sec_half
	api_url_list.append(api_url_full)

fields = ["Application","Title","Filename","Base Url","Type","Name","Data Type","Necessity","Description","Default"]

with open(sys.argv[1], 'a') as output:
    writer = csv.writer(output)
    writer.writerow(fields)

for url in api_url_list:
	print(['python', sys.argv[0], url, sys.argv[1]])
	output = subprocess.check_output(['python', 'api-extractor.py', sys.argv[1], url])